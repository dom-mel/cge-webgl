<!Doctype html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <title>Toon Shading</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="../css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
    body {
        padding-top: 60px;
        padding-bottom: 40px;
    }
    </style>
    <link href="../css/bootstrap-responsive.css" rel="stylesheet">
    <link href="../css/my.css" rel="stylesheet">
    <script src="../js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="../js/bootstrap.js" type="text/javascript"></script>

    <script type="text/javascript" src="../lib/glMatrix-0.9.5.min.js"></script>
    <script type="text/javascript" src="../lib/webgl-utils.js"></script>
    <script type="text/javascript" src="../lib/tdl/base.js"></script>
    <script type="text/javascript" src="../lib/tdl/webgl.js"></script>
    <script type="text/javascript" src="../lib/tdl/models.js"></script>
    <script type="text/javascript" src="../lib/tdl/primitives.js"></script>
    <script type="text/javascript" src="../lib/tdl/programs.js"></script>
    <script type="text/javascript" src="../lib/tdl/textures.js"></script>
    <script type="text/javascript" src="../lib/mathlib.js"></script>
    <script type="text/javascript" src="../lib/util.js"></script>
    
    <script type="text/javascript" src="smap.js"></script>
    
    <script id="sphereVertexShader" type="text/glsl">
		uniform mat4 projection;
		uniform mat4 view;
		uniform mat4 model;
        uniform vec3 camPos;

        attribute vec4 position;
        attribute vec3 normal;
        attribute vec2 texCoord;

		varying vec2 uvCoords;
        varying vec3 debug;

		void main() {

            vec3 normalW = vec3(model * vec4(normal, 0.0));

            vec3 r = normalize(reflect(camPos, normalW));
            float m = 2.0 * sqrt(r.x*r.x + r.y*r.y + (r.z + 1.0)*(r.z + 1.0));

            //uvCoords = vec2(r.x/m + 0.5, r.y/m + 0.5);
            uvCoords = vec2((r.x + 1.0)/2.0, (r.y + 1.0)/2.0);
            debug = vec3(uvCoords.y, 0, 0);
            gl_Position = projection * view * model * position;
		}
	</script>
	
	<script id="sphereFragmentShader" type="text/glsl">
		precision highp float;

		uniform sampler2D texture;

        varying vec3 debug;
		varying vec2 uvCoords;

		void main() {
			gl_FragColor.rgb = texture2D(texture, uvCoords).rgb;
            //gl_FragColor.rgb = debug;
			gl_FragColor.a = 1.0;
		}
	</script>
	
	<script type="text/javascript">
		$(document).ready(initializeGraphics);
	</script> 
</head>
<body>
    <header class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse"
                    data-target=".nav-collapse"> <span class="icon-bar"></span> <span
                    class="icon-bar"></span> <span class="icon-bar"></span> </a> <a
                    class="brand" href="../index.html">Computer Graphics and
                    Effects</a>
                <div class="nav-collapse">
                    <ul class="nav">
                        <li><a href="../uebung1/index.html">&Uuml;bung&nbsp;1</a></li>
                        <li><a href="../uebung2/index.html">&Uuml;bung&nbsp;2</a></li>
                        <li class="active"><a href="../uebung3/index.html">Übung&nbsp;3</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <div class="container">

        <div class="page-header">
            <h1>
                &Uuml;bung 3.1 <small>Sphärisches Reflection Mapping</small>
            </h1>
            <br/>
            <a href="index.html">Zur&uuml;ck zur &Uuml;bersicht</a>
        </div>


        <div class="row">
            <div class="span6">
                <h2>Aufgabe</h2>
                <p>
                    TODO
                </p>
                <h2>Lösungsansatz</h2>
                <p>
                    TODO
                </p>
      		</div>
      		<div class="span6">
      			<h2>Demo</h2>
                <canvas id="canvas" width="500" height="500"></canvas>
                <h2>Verwendete Resourcen</h2>
                <ul>
                    <li><a href="https://github.com/toji/gl-matrix"
                           target="_blank">glMatrix Bibliothek</a>
                    </li>
                    <li><a href="https://public.beuth-hochschule.de/~tramberend/12-ss/mmi-rtr/examples/02-tdl-simple/lit.html#3"
                           target="_blank">Beispiel von Prof. Dr. Henrik Tramberend für Phong Shading</a>
                    </li>
                    <li><a href="http://twitter.github.com/bootstrap/"
                           target="_blank">Bootstrap CSS für das Layout</a>
                    </li>
                    <li><a href="http://code.google.com/p/threedlibrary/"
                           target="_blank">threedlibrary, JavaScript OpenGL Bibliothek</a>
                    </li>
                    <li>
                        <a href="http://jquery.org/" target="_blank">
                            JQuery
                        </a>
                    </li>
                </ul>
                <h2>Quellcode</h2>
                <ul>
                    <li>
                        <a href="https://github.com/dom-mel/cge-webgl/blob/gh-pages/uebung2/lit3.js" target="_blank">
                            JavaScript Programm lit3.js
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/dom-mel/cge-webgl/blob/gh-pages/uebung2/a33.html" target="_blank">
                            Diese HTML Seite. Shader befinden sich im Header.
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>